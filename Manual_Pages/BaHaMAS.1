.\" Automatically generated by Pandoc 2.7.2
.\"
.TH "BaHaMAS" "1" "March 26, 2020" "Version 1.0.0" "General User Manual"
.hy
.SH NAME
.PP
BaHaMAS - Bash Handler to Monitor and Administrate Simulations
.SH SYNOPSIS
.PP
\f[B]BaHaMAS\f[R] [\[en]help] [\[en]version] [\[en]setup]
\f[I]execution-mode\f[R] [\f[I]options\f[R] \&...]
.SH DESCRIPTION
.PP
\f[C]BaHaMAS\f[R] is a tool to efficiently run LQCD simulations on
supercomputers.
During years, it has grown and improved, so that it has by now plenty of
functionality to submit, monitor, continue and resume jobs.
.PP
It should be intuitive to use it, especially if you are a bit familiar
with the git version control system.
Several execution modes are available and you can obtain usage
information for each of them using their \f[B]\[en]help\f[R] option.
.PP
A more detailed general overview is available
online (https://gitlab.itp.uni-frankfurt.de/lattice-qcd/ag-philipsen/BaHaMAS/-/wikis/home).
.SH OPTIONS
.TP
.B --help
Display a minimal summary of this manual in the terminal.
.TP
.B --version
Print a version message in the terminal.
.TP
.B --setup
Configure the program.
You will be asked to fill out a form through a self-explainatory,
rudimental, but functional GUI.
This option can also be used to update and/or complete previous
configurations.
.SH EXECUTION MODES
.PP
Execution modes can be classified in three categories.
.PP
   *   *   *   *   *
.IP "1." 3
There are execution modes meant to prepare needed files and folders
and/or submit new simulation(s).
These all begins parsing the \f[B]betas\f[R] file and they then act only
on uncommented lines in it.
.TP
.B continue
Unfinished new-chains jobs (if it is possible to deduce it) will be
continued.
The input file of each simulation is adjusted according to the option
passed.
The number of trajectories which will be done is determined as follows.
.RS
.IP \[bu] 2
If the \f[B]\[en]measurements\f[R] option is given, then it will be
used.
.IP \[bu] 2
Otherwise, if the \f[B]\[en]till\f[R]\f[I]=number\f[R] option is given,
then it will be used.
.IP \[bu] 2
Otherwise, if the \f[B]g\f[R]\f[I]number\f[R] field is present in the
\f[B]betas\f[R] file, then it will be used.
.IP \[bu] 2
Otherwise, the measurement option in the input file is not modified.
.PP
To resume a simulation from a given trajectory, add `r[number]' in the
\f[B]betas\f[R] file.
Use `rlast' in the \f[B]betas\f[R] file to resume a simulation from the
last saved checkpoint.
.RE
.TP
.B continue-thermalization
As \f[B]continue\f[R], but for thermalization runs.
.TP
.B invert-configurations
Prepare what is needed and submit measurement simulation(s).
.TP
.B prepare-only
Files and folders for the chains obtained from the \f[B]betas\f[R] file
are prepared.
Needed jobscripts are created but none of them is submitted.
.TP
.B submit-only
After having checked that all needed files and jobscripts are available,
new-chain simulation(s) are submitted.
.TP
.B submit
This mode is doing at the same time what can be done separately by
\f[B]prepare-only\f[R] and \f[B]submit-only\f[R] modes.
.TP
.B thermalize
As submit, but for thermalization runs.
.PP
   *   *   *   *   *
.IP "2." 3
Another class of execution modes are meant to monitor queued jobs or to
get report about existing simulation(s).
Most of them do not parse the \f[B]betas\f[R] file or have an option to
consider all runs in a given folder.
.TP
.B acceptance-rate-report
Produce a table with acceptance rates in subsequent intervals of
trajectories for the simulation(s) obtained from the \f[B]betas\f[R]
file.
.TP
.B clean-output-files
Check and if needed clean the measurement file for the simulation(s)
obtained from the \f[B]betas\f[R] file.
.TP
.B database
Access to database functionality.
This allows to update, plan an update or display with possible filtering
the own database.
A report out of it can also be produced.
It is a very valuable feature, in particular to have a project overview.
.TP
.B job-status
Produce an overview of all submitted jobs getting information from
scheduler.
.TP
.B simulation-status
Produce a detailed report of all simulation(s) in a given folder.
Colours are used here to highlight problematic runs.
If something is red, some investigation is required.
.PP
   *   *   *   *   *
.IP "3." 3
To the last class of execution modes belong those to perform automatized
operations on the \f[B]betas\f[R] file.
.TP
.B complete-betas-file
Complete the betas file adding new chains to it.
.TP
.B comment-betas
Comment lines in the betas file.
.TP
.B uncomment-betas
Uomment lines in the betas file.
.SH FILES
.TP
.B ./betas
Running \f[C]BaHaMAS\f[R] in most modes relies on a local configuration
file, which name must be \f[C]betas\f[R].
Refer to its dedicated
section (https://gitlab.itp.uni-frankfurt.de/lattice-qcd/ag-philipsen/BaHaMAS/-/wikis/Getting-started#betasFile)
in the Wiki for more information.
.SH ENVIRONMENT
.PP
No environment variable affects \f[C]BaHaMAS\f[R] behaviour at the
moment.
.SH DIAGNOSTICS
.PP
Error messages can cause immediate termination or not.
They result in a message to the standard output prefixed by
\f[C]ERROR:\f[R] or by \f[C]FATAL:\f[R], respectively.
If an error occur, an explanation follows in a way such that the user
can react properly.
.PP
Although it should not happen, throughout the code there are
\f[B]Internal\f[R] error messages which are prefixed by the
\f[C]INTERNAL:\f[R] string when printed to the terminal.
In case you get one of them executing \f[C]BaHaMAS\f[R], it is very
important that you report a bug to the authors.
.SH REPORTING BUGS
.PP
The best way to report a bug is to open an issue on GitLab.
Maintainers will be automatically notified.
.PP
Be as specific as possible in order to reproduce the issue and, in case
you got an \f[B]Internal\f[R] error, be so kind to include the error
message.
.SH AUTHOR
.PP
\f[C]BaHaMAS\f[R] was started by Alessandro Sciarra in 2014.
You can have a look to the Contributors page in the Repository on GitLab
to have more information.
If you cloned the repository on your machine, you can also use git
commands like \f[C]git shortlog -sne\f[R] to get an overview.
.SH SEE ALSO
.PP
The online
Wiki (https://gitlab.itp.uni-frankfurt.de/lattice-qcd/ag-philipsen/BaHaMAS/-/wikis/home)
contains the full documentation.
.SH AUTHORS
Alessandro Sciarra.
